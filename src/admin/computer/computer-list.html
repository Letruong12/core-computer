<div class="container mt-4">
    <h2>List computer</h2>
    <button class="btn btn-primary" (click)="openAdd()">Thêm</button>
    <div class="row mt-4">
        <div class="col-md-3">
            <select class="form-control" [(ngModel)]="categoryId" (change)="search()">
                <option [ngValue]="null">-- Chọn loại máy tính --</option>
                <option *ngFor="let c of ListCategory()" [ngValue]="c.id">
                    {{ c.categoryName }}
                </option>
            </select>
        </div>
        <div class="col-md-3 input-search">
            <input type="text" class="form-control" [(ngModel)]="textSearch" placeholder="Tìm kiếm..." (keyup.enter)="search()">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" class="icon-search" (click)="search()">
                <path
                    d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398l3.85 3.85a1 1 0 0 0 1.415-1.415l-3.85-3.85zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
            </svg>
        </div>
        

    </div>
    <table class="table table-bordered table-hover shadow-sm rounded mt-4">
        <thead>
            <tr>
                <th>Name</th>
                <th>Image</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Category computer</th>
                <th>Status</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let mt of ListDataDefault()">
                <td>{{ mt.productName }}</td>
                <td style="text-align: center;">
                    <img width="150px" src="{{api}}{{mt.imageUrl}}">
                </td>
                <td>{{ mt.price }}</td>
                <td>{{ mt.quantity }}</td>
                <td>{{ mt.category != null ? mt.category.categoryName : 'chưa xác định' }}</td>
                <td>{{ mt.isActive ? 'Hoạt động' : 'Không hoạt động' }}</td>
                <td>
                    <button class="btn btn-primary" style="margin-right: 8px;" (click)="openEdit(mt)">Sửa</button>
                    <button class="btn btn-danger" (click)="deleteItem(mt.id)">Xóa</button>
                </td>
            </tr>
        </tbody>
    </table>
    <div class="row mt-3 justify-content-end" *ngIf="ListDataDefault().length !== 0">
        <div class="col-auto d-flex align-items-center gap-2">
            <button type="button" class="btn btn-sm btn-primary" [disabled]="IsDisablePrevious" (click)="goPrev()">
                &lt;
            </button>

            <div>{{ pageNumber }}</div>

            <button type="button" class="btn btn-sm btn-primary" [disabled]="IsDisableNext" (click)="goNext()">
                &gt;
            </button>

            <select class="form-select form-select-sm w-auto" [(ngModel)]="pageSize" (change)="search()">
                <option *ngFor="let item of dataPageSize" [ngValue]="item.Key">
                    {{ item.Value }}
                </option>
            </select>
        </div>
    </div>


</div>

<computer-popup 
    *ngIf="showForm()" 
    [data]="selected()" 
    (close)="closeForm()" 
    (save)="save($event)">
</computer-popup>